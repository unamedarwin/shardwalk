<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Shardwalk: Isometric Chronicles</title>
  <style>
    html, body { margin: 0; height: 100%; background: #0e0e10; overflow: hidden; }
    #game { width: 100%; height: 100%; }
    canvas { display: block; touch-action: none; }

    #hud {
      position: fixed; top: 10px; left: 10px; right: 10px;
      display: flex; gap: 8px; align-items: center; flex-wrap: wrap;
      font: 13px system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: #fff; z-index: 10; user-select: none;
    }
    .chip {
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 10px; padding: 6px 10px;
      display: inline-flex; gap: 6px; align-items: center;
    }
    button, label.btn {
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 10px;
      color: #fff; padding: 6px 10px; cursor: pointer;
      display: inline-flex; gap: 8px; align-items: center;
    }
    button:active, label.btn:active { transform: translateY(1px); }
    input[type="file"] { display: none; }

    /* Flags */
    .flag { width: 20px; height: 14px; display: inline-block; border-radius: 3px; object-fit: cover; }
    .langbtn { padding: 6px 8px; }
    .langbtn[aria-pressed="true"] { outline: 2px solid rgba(255,255,255,.35); }

    #actions {
      position: fixed; right: 14px; bottom: 14px; z-index: 10;
      display: flex; gap: 8px;
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    #actions button { padding: 10px 12px; }

    #pad {
      position: fixed; left: 14px; bottom: 14px; z-index: 10;
      display: grid; grid-template-columns: 44px 44px 44px;
      grid-template-rows: 44px 44px 44px;
      gap: 6px; user-select: none;
    }
    #pad button { width: 44px; height: 44px; padding: 0; font-size: 18px; }
    #pad .empty { visibility: hidden; }

    #modal {
      position: fixed; inset: 0; background: rgba(0,0,0,.62);
      display: none; align-items: center; justify-content: center;
      z-index: 30; padding: 18px;
    }
    #modal .box {
      width: min(860px, 100%);
      background: #141416;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding: 14px;
      color: #fff;
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, Arial;
      max-height: 82vh; overflow: auto;
    }
    #modal .row { display: flex; justify-content: space-between; gap: 10px; align-items: center; }
    #modal h2 { margin: 0; font-size: 16px; }
    #modal p, #modal li { opacity: .92; line-height: 1.35; }
    .muted { opacity: .75; }
    .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .card {
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px; padding: 10px;
    }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .kbd { border: 1px solid rgba(255,255,255,.18); border-bottom-width: 2px; padding: 0 6px; border-radius: 8px; background: rgba(0,0,0,.25); }

    #login {
      position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
      background: radial-gradient(1200px 600px at 50% 30%, rgba(80,120,255,.15), rgba(0,0,0,.85));
      z-index: 50; padding: 18px;
    }
    #login .panel {
      width: min(920px, 100%);
      background: rgba(16,16,18,.92);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 14px;
      color: #fff;
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    #login h1 { margin: 0 0 6px 0; font-size: 18px; }
    #login .panel p { margin: 6px 0; opacity: .9; }
    #login .fields { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    #login input, #login select {
      width: 100%; padding: 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      color: #fff;
      outline: none;
    }
    #login .actions { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; align-items: center; }
    #langPickerLogin { display: flex; gap: 6px; flex-wrap: wrap; margin: 8px 0 6px; }
    #toast {
      position: fixed; left: 50%; bottom: 92px; transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      color: #fff; padding: 8px 10px; border-radius: 12px;
      font: 13px system-ui, -apple-system, Segoe UI, Roboto, Arial;
      z-index: 40; display: none;
      max-width: min(720px, 92vw);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  </style>
</head>
<body>

  <div id="login">
    <div class="panel">
      <h1>Shardwalk: Isometric Chronicles</h1>

      <div id="langPickerLogin" aria-label="Language picker"></div>

      <p class="muted" data-i18n="login.tagline"></p>
      <p>
        <span data-i18n="hud.room"></span>: <b id="roomLabel"></b>
        <span class="muted"> <span data-i18n="login.shareHint"></span> <span class="mono">?room=...</span></span>
      </p>

      <div class="fields">
        <div>
          <label class="muted" data-i18n="login.nameLabel"></label>
          <input id="name" maxlength="18" />
        </div>
        <div>
          <label class="muted" data-i18n="login.passLabel"></label>
          <input id="pass" type="password" />
        </div>
        <div>
          <label class="muted" data-i18n="login.lifestyleLabel"></label>
          <select id="life"></select>
        </div>
        <div>
          <label class="muted" data-i18n="login.optionsLabel"></label>
          <select id="remember"></select>
        </div>
      </div>

      <div class="actions">
        <button id="start" data-i18n="login.enterWorld"></button>
        <button id="copyLink" data-i18n="login.copyLink"></button>
        <span class="muted" data-i18n="login.controls"></span>
      </div>

      <p class="muted" style="margin-top:10px" data-i18n="login.ledgerNote"></p>
    </div>
  </div>

  <div id="hud" style="display:none">
    <button id="btnLang" class="langbtn" title="Language" aria-label="Language">
      <img id="langIcon" class="flag" alt="" />
    </button>

    <div class="chip"><span data-i18n="hud.room"></span>: <b id="room"></b></div>
    <div class="chip"><span data-i18n="hud.peers"></span>: <b id="peers">0</b></div>
    <div class="chip"><span data-i18n="hud.you"></span>: <b id="me">‚Ä¶</b></div>
    <div class="chip">‚ô• <b id="hp">100</b></div>
    <div class="chip">‚ö° <b id="stam">100</b></div>
    <div class="chip">üçñ <b id="hunger">0</b></div>
    <div class="chip"><span data-i18n="hud.weight"></span> <b id="wt">0</b>/<b id="cap">0</b></div>

    <div class="chip">
      ü™µ <b id="wood">0</b>
      ‚õè <b id="stone">0</b>
      ‚õì <b id="ore">0</b>
      üßµ <b id="fiber">0</b>
      üêæ <b id="hide">0</b>
      ‚úß <b id="shard">0</b>
      üçì <b id="berry">0</b>
    </div>

    <button id="btnQuests" data-i18n="btn.quests"></button>
    <button id="btnSkills" data-i18n="btn.skills"></button>
    <button id="btnCraft" data-i18n="btn.craft"></button>
    <button id="btnWorld" data-i18n="btn.world"></button>
    <button id="btnCredits" data-i18n="btn.credits"></button>
    <button id="btnExport" data-i18n="btn.export"></button>
    <label class="btn"><span data-i18n="btn.import"></span> <input id="import" type="file" accept="application/json" /></label>
  </div>

  <div id="pad" style="display:none" aria-label="controls">
    <div class="empty"></div><button id="btnUp">‚ñ≤</button><div class="empty"></div>
    <button id="btnLeft">‚óÄ</button><div class="empty"></div><button id="btnRight">‚ñ∂</button>
    <div class="empty"></div><button id="btnDown">‚ñº</button><div class="empty"></div>
  </div>

  <div id="actions" style="display:none">
    <button id="btnAction"></button>
    <button id="btnAttack"></button>
  </div>

  <div id="toast"></div>
  <div id="game"></div>

  <div id="modal">
    <div class="box">
      <div class="row">
        <h2 id="modalTitle">‚Äî</h2>
        <button id="closeModal" data-i18n="ui.close"></button>
      </div>
      <div id="modalBody" style="margin-top:10px"></div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>

</body>
</html>
